define(["exports","./defined-f727cca5","./Math-a357ad19","./Cartesian2-2029a73e","./EllipsoidTangentPlane-f9074f34","./PolygonPipeline-5d50ff8b","./PolylinePipeline-010f750e"],function(e,C,A,w,E,O,b){"use strict";var i={};var M=new w.Cartographic,L=new w.Cartographic;var F=new Array(2),H=new Array(2),T={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,n,r,o){var a=function(e,i,t,n){var r=i.length;if(!(r<2)){var o=C.defined(n),a=C.defined(t),l=!0,s=new Array(r),h=new Array(r),g=new Array(r),p=i[0];s[0]=p;var d=e.cartesianToCartographic(p,M);a&&(d.height=t[0]),l=l&&d.height<=0,h[0]=d.height,g[0]=o?n[0]:0;for(var P,f,u=1,c=1;c<r;++c){var v=i[c],y=e.cartesianToCartographic(v,L);a&&(y.height=t[c]),l=l&&y.height<=0,P=d,f=y,A.CesiumMath.equalsEpsilon(P.latitude,f.latitude,A.CesiumMath.EPSILON14)&&A.CesiumMath.equalsEpsilon(P.longitude,f.longitude,A.CesiumMath.EPSILON14)?d.height<y.height&&(h[u-1]=y.height):(s[u]=v,h[u]=y.height,g[u]=o?n[c]:0,w.Cartographic.clone(y,d),++u)}if(!(l||u<2))return s.length=u,h.length=u,g.length=u,{positions:s,topHeights:h,bottomHeights:g}}}(e,i,t,n);if(C.defined(a)){if(i=a.positions,t=a.topHeights,n=a.bottomHeights,3<=i.length){var l=E.EllipsoidTangentPlane.fromPoints(i,e).projectPointsOntoPlane(i);O.PolygonPipeline.computeWindingOrder2D(l)===O.WindingOrder.CLOCKWISE&&(i.reverse(),t.reverse(),n.reverse())}var s,h,g=i.length,p=g-2,d=A.CesiumMath.chordLength(r,e.maximumRadius),P=T;if(P.minDistance=d,P.ellipsoid=e,o){var f,u=0;for(f=0;f<g-1;f++)u+=b.PolylinePipeline.numberOfPoints(i[f],i[f+1],d)+1;s=new Float64Array(3*u),h=new Float64Array(3*u);var c=F,v=H;P.positions=c,P.height=v;var y=0;for(f=0;f<g-1;f++){c[0]=i[f],c[1]=i[f+1],v[0]=t[f],v[1]=t[f+1];var m=b.PolylinePipeline.generateArc(P);s.set(m,y),v[0]=n[f],v[1]=n[f+1],h.set(b.PolylinePipeline.generateArc(P),y),y+=m.length}}else P.positions=i,P.height=t,s=new Float64Array(b.PolylinePipeline.generateArc(P)),P.height=n,h=new Float64Array(b.PolylinePipeline.generateArc(P));return{bottomPositions:h,topPositions:s,numCorners:p}}},e.WallGeometryLibrary=i});
